<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>System.GIO.Async.Cancellable</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_System-GIO-Async-Cancellable.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">gio-0.12.4: Binding to the GIO.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Portability</th><td>portable (depends on GHC)</td></tr><tr><th>Stability</th><td>alpha</td></tr><tr><th>Maintainer</th><td>gtk2hs-devel@lists.sourceforge.net</td></tr><tr><th>Safe Haskell</th><td>Safe-Infered</td></tr></table><p class="caption">System.GIO.Async.Cancellable</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Details
</a></li><li><a href="#g:2">Types
</a></li><li><a href="#g:3">Methods
</a></li><li><a href="#g:4">Signals
</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc empty">&nbsp;</div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">newtype</span>  <a href="#t:Cancellable">Cancellable</a>  = <a href="#v:Cancellable">Cancellable</a> (<a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/Foreign-ForeignPtr-Safe.html#t:ForeignPtr">ForeignPtr</a> <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a>)</li><li class="src short"><span class="keyword">class</span> <a href="/sheep-transfer/cabal-dev//share/doc/glib-0.12.4/html/System-Glib-GObject.html#t:GObjectClass">GObjectClass</a> o =&gt; <a href="#t:CancellableClass">CancellableClass</a> o </li><li class="src short"><a href="#v:cancellableNew">cancellableNew</a> :: <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a></li><li class="src short"><a href="#v:cancellableIsCancelled">cancellableIsCancelled</a> :: <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a> -&gt; <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:cancellableThrowErrorIfCancelled">cancellableThrowErrorIfCancelled</a> :: <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a> -&gt; <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></li><li class="src short"><a href="#v:cancellableGetCurrent">cancellableGetCurrent</a> :: <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> (<a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a>)</li><li class="src short"><a href="#v:cancellablePopCurrent">cancellablePopCurrent</a> :: <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a> -&gt; <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></li><li class="src short"><a href="#v:cancellablePushCurrent">cancellablePushCurrent</a> :: <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a> -&gt; <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></li><li class="src short"><a href="#v:cancellableReset">cancellableReset</a> :: <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a> -&gt; <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></li><li class="src short"><a href="#v:cancellableCancel">cancellableCancel</a> :: <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a> -&gt; <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></li><li class="src short"><a href="#v:cancellableCancelled">cancellableCancelled</a> :: <a href="/sheep-transfer/cabal-dev//share/doc/glib-0.12.4/html/System-Glib-Signals.html#t:Signal">Signal</a> <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a> (<a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a>)</li></ul></div><div id="interface"><h1 id="g:1">Details
</h1><div class="doc"><p><code><a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a></code> is a thread-safe operation cancellation stack used throughout GIO to allow for
 cancellation of synchronous and asynchronous operations.
</p></div><h1 id="g:2">Types
</h1><div class="top"><p class="src"><span class="keyword">newtype</span>  <a name="t:Cancellable" class="def">Cancellable</a>  </p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:Cancellable" class="def">Cancellable</a> (<a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/Foreign-ForeignPtr-Safe.html#t:ForeignPtr">ForeignPtr</a> <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a>)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Cancellable" class="caption collapser" onclick="toggleSection('i:Cancellable')">Instances</p><div id="section.i:Cancellable" class="show"><table><tr><td class="src"><a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Eq.html#t:Eq">Eq</a> <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Ord.html#t:Ord">Ord</a> <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="/sheep-transfer/cabal-dev//share/doc/glib-0.12.4/html/System-Glib-GObject.html#t:GObjectClass">GObjectClass</a> <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="System-GIO-Async-Cancellable.html#t:CancellableClass">CancellableClass</a> <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="/sheep-transfer/cabal-dev//share/doc/glib-0.12.4/html/System-Glib-GObject.html#t:GObjectClass">GObjectClass</a> o =&gt; <a name="t:CancellableClass" class="def">CancellableClass</a> o </p><div class="subs instances"><p id="control.i:CancellableClass" class="caption collapser" onclick="toggleSection('i:CancellableClass')">Instances</p><div id="section.i:CancellableClass" class="show"><table><tr><td class="src"><a href="System-GIO-Async-Cancellable.html#t:CancellableClass">CancellableClass</a> <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><h1 id="g:3">Methods
</h1><div class="top"><p class="src"><a name="v:cancellableNew" class="def">cancellableNew</a> :: <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a></p><div class="doc"><p>Creates a new <code><a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a></code> object.
</p><p>Applications that want to start one or more operations that should be cancellable should create a
 <code><a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a></code> and pass it to the operations.
</p><p>One <code><a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a></code> can be used in multiple consecutive operations, but not in multiple concurrent
 operations.
</p></div></div><div class="top"><p class="src"><a name="v:cancellableIsCancelled" class="def">cancellableIsCancelled</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">-&gt; <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Bool.html#t:Bool">Bool</a></td><td class="doc"><p>returns <code><a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Bool.html#v:True">True</a></code> if cancellable is cancelled, <code><a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Bool.html#v:False">False</a></code> if called with <code><a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Maybe.html#v:Nothing">Nothing</a></code> or if item is not cancelled.
</p></td></tr></table></div><div class="doc"><p>Checks if a cancellable job has been cancelled.
</p></div></div><div class="top"><p class="src"><a name="v:cancellableThrowErrorIfCancelled" class="def">cancellableThrowErrorIfCancelled</a> :: <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a> -&gt; <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></p><div class="doc"><p>If the cancellable is cancelled, throws a <code><a href="/sheep-transfer/cabal-dev//share/doc/glib-0.12.4/html/System-Glib-GError.html#t:GError">GError</a></code> to notify that the operation was cancelled.
</p></div></div><div class="top"><p class="src"><a name="v:cancellableGetCurrent" class="def">cancellableGetCurrent</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> (<a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a>)</td><td class="doc"><p>returns a <code><a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a></code> from the top of the stack, or <code><a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Maybe.html#v:Nothing">Nothing</a></code> if the stack is empty.
</p></td></tr></table></div><div class="doc"><p>Gets the top cancellable from the stack.
</p></div></div><div class="top"><p class="src"><a name="v:cancellablePopCurrent" class="def">cancellablePopCurrent</a> :: <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a> -&gt; <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></p><div class="doc"><p>Pops cancellable off the cancellable stack (verifying that cancellable is on the top of the stack).
</p></div></div><div class="top"><p class="src"><a name="v:cancellablePushCurrent" class="def">cancellablePushCurrent</a> :: <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a> -&gt; <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></p><div class="doc"><p>Pushes cancellable onto the cancellable stack. The current cancllable can then be recieved using
 <code><a href="System-GIO-Async-Cancellable.html#v:cancellableGetCurrent">cancellableGetCurrent</a></code> .
</p><p>This is useful when implementing cancellable operations in code that does not allow you to pass down
 the cancellable object.
</p><p>This is typically called automatically by e.g. <code><a href="System-GIO-Types.html#t:File">File</a></code> operations, so you rarely have to call this
 yourself.
</p></div></div><div class="top"><p class="src"><a name="v:cancellableReset" class="def">cancellableReset</a> :: <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a> -&gt; <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></p><div class="doc"><p>Resets cancellable to its uncancelled state.
</p></div></div><div class="top"><p class="src"><a name="v:cancellableCancel" class="def">cancellableCancel</a> :: <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a> -&gt; <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a></p><div class="doc"><p>Will set cancellable to cancelled, and will emit the <a href="cancelled.html">cancelled</a> signal. (However, see the warning
 about race conditions in the documentation for that signal if you are planning to connect to it.)
</p><p>This function is thread-safe. In other words, you can safely call it from a thread other than the
 one running the operation that was passed the cancellable.
</p><p>The convention within gio is that cancelling an asynchronous operation causes it to complete
 asynchronously. That is, if you cancel the operation from the same thread in which it is running,
 then the operation's <code>AsyncReadyCallback</code> will not be invoked until the application returns to the
 main loop.
</p></div></div><h1 id="g:4">Signals
</h1><div class="top"><p class="src"><a name="v:cancellableCancelled" class="def">cancellableCancelled</a> :: <a href="/sheep-transfer/cabal-dev//share/doc/glib-0.12.4/html/System-Glib-Signals.html#t:Signal">Signal</a> <a href="System-GIO-Async-Cancellable.html#t:Cancellable">Cancellable</a> (<a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/base-4.5.0.0/System-IO.html#t:IO">IO</a> <a href="/home/tener/localopt/ghc-7.4.1/share/doc/ghc/html/libraries/ghc-prim-0.2.0.0/GHC-Tuple.html#t:-40--41-">()</a>)</p><div class="doc"><p>Emitted when the operation has been cancelled.
</p><p>Can be used by implementations of cancellable operations. If the operation is cancelled from another
 thread, the signal will be emitted in the thread that cancelled the operation, not the thread that
 is running the operation.
</p><p>Note that disconnecting from this signal (or any signal) in a multi-threaded program is prone to
 race conditions. For instance it is possible that a signal handler may be invoked even after a call
 to <code>signalHandlerDisconnect</code> for that handler has already returned.
</p><p>There is also a problem when cancellation happen right before connecting to the signal. If this
 happens the signal will unexpectedly not be emitted, and checking before connecting to the signal
 leaves a race condition where this is still happening.
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.10.0</p></div></body></html>